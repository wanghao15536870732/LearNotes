# 边缘检测

## Canny边缘检测

【第一步】消除噪声

【第二步】计算梯度赋值跟方向

+ 按照Sobel滤波器的步骤来制作

【第三步】非极大值抑制

+ 排除非边缘像素

【第四部】滞后阈值

+ 像素高于阈值 保留为边缘像素

+ 像素低于阈值 该像素被排除

+ 在连接到一个高于阈值的像素时被保留

```c
void Canny(
    InputArray src,
    OutputArray edges,
    double threshold1,  //第一个滞后性阈值
    double threshold2,  //第二个滞后性阈值
    int apertureSize,  //Sobel算子的孔径大小，默认值3
    bool L2gradient,  //梯度幅值的标识
);

//转换灰度图
cvtColor(src, gray, COLOR_BGR2GRAY);

//使用3×3内核来降噪
blur(gray, edge, Size(3, 3));

//Canny算子
Canny(edge, dst, 3, 9, 3);
```

### Sobel算子：Sobel()函数

```c
void Sobel(
    InputArray src,
    OutputArray dst,
    int ddepth,  //输出图像的深度
    itn dx,  //x方向上的差分阶数
    int dy,  //y方向上的差分阶数
    int ksize=3, //Sobel核的大小
    double scale=1,  //缩放因子
    double delta=0,   //
    int borderType=BORDER_DEFAULT
);

//x轴方向
Mat grad_x, grad_y;
Sobel(src, grad_x, CV_16S, 1, 0, 3, 1, 1, BORDER_DEFAULT);
convertScaleAbs(grad_x, dst1);

Sobel(src, grad_x, CV_16S, 1, 0, 3, 1, 1, BORDER_DEFAULT);
convertScaleAbs(grad_x, dst2);

//合成效果
addWeighted(dst1, 0.5, dst2, 0.5, 0, dst3);

```
